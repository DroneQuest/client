<!DOCTYPE html>
<html ng-app="droneApp">
  <head>
    <meta charset="UTF-8">
    <title>Drone Control</title>
    <script src="nodecopter-client.js"></script>
    <script src="socket.io.min.js"></script>
    <script src="jquery.min.js"></script>
    <script>
        $(function () {
            function startArDRoneStream() {
                new NodecopterStream(document.getElementById("placeholder"), {port: 3001});
            }
            function startCameraFeed() {
                navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia;
                var constraints = {audio: false, video: true};
                var video = document.querySelector("video");
                function successCallback(stream) {
                    window.stream = stream; // stream available to console
                    if (window.URL) {
                        video.src = window.URL.createObjectURL(stream);
                    } else {
                        video.src = stream;
                    }
                    video.play();
                }
                function errorCallback(error){
                    console.log("navigator.getUserMedia error: ", error);
                }
                navigator.getUserMedia(constraints, successCallback, errorCallback);
            }

            startArDRoneStream();
            startCameraFeed();
        })
    </script>
  </head>
  <body>
    <panel-directive></panel-directive>
    <main ng-view>
    </main>
    <div id="placeholder"></div>
    <!-- <iframe src="http://192.168.1.1:5555" width="200" height="200"></iframe> -->
    <footer>
    </footer>
    <script src="./bundle.js"></script>
  </body>
</html>
